import{d as R,R as F,p as V,x as B,y as P,c as l,o as r,a,b as t,t as o,n as D,F as N,e as A,i as E,_ as L}from"./index-c52e9aa3.js";const O={key:0,class:"print-page mx-auto max-w-2xl bg-white p-8 text-sm text-gray-800"},T={class:"text-center text-xs text-gray-500 mb-6"},I={class:"grid grid-cols-2 gap-2"},M={class:"w-full text-sm"},j={class:"divide-y"},z={class:"py-2 text-right"},G={class:"py-2 text-right font-medium"},U={class:"py-2 text-right"},q={class:"py-2 text-right text-red-600"},H={class:"py-2 text-right"},J={class:"py-2 text-right text-red-600"},Q={class:"py-2 text-right font-medium"},W={class:"py-2 text-right font-medium"},X={key:0,class:"text-xs text-gray-500"},Y={key:1,class:"w-full text-sm"},Z={class:"divide-y divide-gray-100"},$={class:"px-3 py-2 text-gray-700"},K={class:"px-3 py-2 text-right text-gray-600"},tt={class:"px-3 py-2 text-right font-medium text-gray-900"},et={class:"mt-6 grid grid-cols-2 gap-6"},st={class:"border-t pt-4 text-center"},ot={class:"text-xs uppercase text-gray-500"},nt={key:1,class:"p-10 text-center text-red-600"},lt=R({__name:"PrintClosingVoucher",setup(dt){const m=F(),i=V(),y=B(),f=m.params.id;P(()=>{y.load(),i.setCurrentStore()});const n=l(()=>i.vouchers.find(s=>s.id===f)),v=l(()=>{var s;return((s=n.value)==null?void 0:s.discounts)??0}),h=l(()=>{var s;return((s=n.value)==null?void 0:s.refunds)??0}),_=l(()=>{var s;return((s=n.value)==null?void 0:s.refundCount)??0}),C=l(()=>{var s;return((s=n.value)==null?void 0:s.refundBreakdown)??{}}),b=l(()=>{var s;return((s=n.value)==null?void 0:s.expenses)??0}),u=l(()=>{var s;return((s=n.value)==null?void 0:s.expectedClosingCash)??0}),x=l(()=>{var s;return((s=n.value)==null?void 0:s.actualClosingCash)??0}),p=l(()=>{var s;return((s=n.value)==null?void 0:s.difference)??x.value-u.value}),c=l(()=>{const s=C.value;return Object.keys(s).map(d=>{const g=s[d]||{amount:0,count:0},w=d.replace(/_/g," ").replace(/\b\w/g,S=>S.toUpperCase());return{type:d,label:w,amount:g.amount,count:g.count}})}),k=()=>{window.print()};return(s,e)=>n.value?(r(),a("div",O,[e[17]||(e[17]=t("h1",{class:"text-xl font-semibold text-center"},"POS Closing Voucher",-1)),t("p",T," Generated "+o(new Date(n.value.createdAt).toLocaleString()),1),t("dl",I,[e[0]||(e[0]=t("dt",{class:"font-medium text-gray-600"},"Store",-1)),t("dd",null,o(n.value.storeName),1),e[1]||(e[1]=t("dt",{class:"font-medium text-gray-600"},"Cashier",-1)),t("dd",null,o(n.value.cashierName),1),e[2]||(e[2]=t("dt",{class:"font-medium text-gray-600"},"Shift Start",-1)),t("dd",null,o(new Date(n.value.shiftStart).toLocaleString()),1),e[3]||(e[3]=t("dt",{class:"font-medium text-gray-600"},"Shift End",-1)),t("dd",null,o(new Date(n.value.shiftEnd).toLocaleString()),1)]),e[18]||(e[18]=t("hr",{class:"my-4"},null,-1)),t("table",M,[t("tbody",j,[t("tr",null,[e[4]||(e[4]=t("td",{class:"py-2"},"Opening Cash",-1)),t("td",z,"Rs "+o(n.value.openingCash.toFixed(2)),1)]),t("tr",null,[e[5]||(e[5]=t("td",{class:"py-2 font-medium text-gray-700"},"Total Sales",-1)),t("td",G,"Rs "+o(n.value.totalSales.toFixed(2)),1)]),t("tr",null,[e[6]||(e[6]=t("td",{class:"py-2"},"Discounts",-1)),t("td",U,"Rs "+o(v.value.toFixed(2)),1)]),t("tr",null,[e[7]||(e[7]=t("td",{class:"py-2"},"Refunds",-1)),t("td",q,"Rs "+o(h.value.toFixed(2)),1)]),t("tr",null,[e[8]||(e[8]=t("td",{class:"py-2"},"Number of Refunds",-1)),t("td",H,o(_.value),1)]),t("tr",null,[e[9]||(e[9]=t("td",{class:"py-2"},"Expenses",-1)),t("td",J,"Rs "+o(b.value.toFixed(2)),1)]),t("tr",null,[e[10]||(e[10]=t("td",{class:"py-2 font-medium text-gray-700"},"Expected Closing Cash",-1)),t("td",Q,"Rs "+o(u.value.toFixed(2)),1)]),t("tr",null,[e[11]||(e[11]=t("td",{class:"py-2 font-medium text-gray-700"},"Actual Cash",-1)),t("td",W,"Rs "+o(x.value.toFixed(2)),1)]),t("tr",null,[e[12]||(e[12]=t("td",{class:"py-2 font-semibold"},"Difference",-1)),t("td",{class:D(["py-2 text-right font-semibold",p.value===0?"text-green-600":"text-red-600"])}," Rs "+o(p.value.toFixed(2)),3)])])]),e[19]||(e[19]=t("hr",{class:"my-4"},null,-1)),t("div",null,[e[14]||(e[14]=t("h2",{class:"mb-2 text-sm font-semibold text-gray-700"},"Refund Breakdown",-1)),c.value.length===0?(r(),a("div",X,"No refunds recorded.")):(r(),a("table",Y,[e[13]||(e[13]=t("thead",{class:"bg-gray-100 text-gray-600"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left text-xs font-medium uppercase tracking-wide"},"Type"),t("th",{class:"px-3 py-2 text-right text-xs font-medium uppercase tracking-wide"},"Count"),t("th",{class:"px-3 py-2 text-right text-xs font-medium uppercase tracking-wide"},"Amount (Rs)")])],-1)),t("tbody",Z,[(r(!0),a(N,null,A(c.value,d=>(r(),a("tr",{key:d.type},[t("td",$,o(d.label),1),t("td",K,o(d.count),1),t("td",tt,"Rs "+o(d.amount.toFixed(2)),1)]))),128))])]))]),e[20]||(e[20]=t("hr",{class:"my-4"},null,-1)),t("p",null,[e[15]||(e[15]=t("strong",null,"Remarks:",-1)),E(" "+o(n.value.remarks||"-"),1)]),t("div",et,[e[16]||(e[16]=t("div",{class:"border-t pt-4 text-center"},[t("p",{class:"text-xs uppercase text-gray-500"},"Cashier Signature")],-1)),t("div",st,[t("p",ot," Manager "+o(n.value.managerApproved?"Approved":"Pending"),1)])]),t("button",{class:"mt-8 w-full rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white",onClick:k}," Print ")])):(r(),a("div",nt,"Voucher not found."))}});const at=L(lt,[["__scopeId","data-v-5e7c5f83"]]);export{at as default};
