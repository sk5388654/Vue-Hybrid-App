import{d as I,O as q,L as B,k as O,s as T,r as v,c as U,y as j,o as n,a as r,C as A,b as t,t as o,f as m,w as i,v as f,D as y,F as b,e as x,n as V}from"./index-24020ea4.js";const P={class:"space-y-6"},$={key:0,class:"glass-panel space-y-4"},z={class:"flex items-center justify-between"},H={class:"section-heading"},G={key:0,class:"rounded-2xl border border-red-100 bg-red-50/80 px-4 py-2 text-sm text-red-700"},J={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},K=["placeholder"],Q=["value"],W=["value"],X={class:"flex gap-2"},Y={class:"glass-panel space-y-4"},Z={class:"flex flex-wrap items-center gap-3 justify-between"},ee={class:"section-heading"},te={class:"flex items-center gap-2"},le=["value"],se=["value"],ae={class:"overflow-hidden rounded-2xl border border-slate-100"},oe={class:"max-h-[540px] overflow-auto"},ne={class:"table-modern"},re={key:0},ue={class:"font-semibold text-slate-900"},ie={class:"text-right text-slate-600"},de={class:"text-right font-semibold text-slate-900"},pe={class:"text-center"},me={class:"inline-flex gap-2"},ce=["onClick"],ve=["onClick"],xe=I({__name:"EmployeeAdmin",setup(fe){const c=q(),C=B(),S=O(),N=["Admin","Manager","Cashier"],D=["Active","Inactive"],s=T({fullName:"",role:"Cashier",username:"",password:"",hireDate:new Date().toISOString().split("T")[0],status:"Active"}),u=v(null),_=v(""),h=v("All"),g=v("All"),d=v(""),k=U(()=>{let a=c.employeesForCurrentStore;const l=_.value.trim().toLowerCase();return l&&(a=a.filter(e=>e.fullName.toLowerCase().includes(l)||e.username.toLowerCase().includes(l)||e.role.toLowerCase().includes(l))),h.value!=="All"&&(a=a.filter(e=>e.role===h.value)),g.value!=="All"&&(a=a.filter(e=>e.status===g.value)),a.sort((e,p)=>e.fullName.localeCompare(p.fullName))}),F=U(()=>{const a=S.sales,l=new Map;return a.forEach(e=>{if(e.cashier){const p=l.get(e.cashier)||{count:0,total:0};p.count+=1,p.total+=e.total,l.set(e.cashier,p)}}),l});function w(){s.fullName="",s.role="Cashier",s.username="",s.password="",s.hireDate=new Date().toISOString().split("T")[0],s.status="Active",u.value=null,d.value=""}function L(){if(!s.fullName.trim()||!s.username.trim()||!s.password.trim()&&!u.value){d.value="Please fill in all required fields";return}try{if(u.value==null)c.addEmployee({fullName:s.fullName.trim(),role:s.role,username:s.username.trim(),password:s.password,hireDate:s.hireDate,status:s.status});else{const a={fullName:s.fullName.trim(),role:s.role,username:s.username.trim(),hireDate:s.hireDate,status:s.status};s.password.trim()&&(a.password=s.password),c.updateEmployee(u.value,a)}w(),d.value=""}catch(a){d.value=a.message||"Failed to save employee"}}function M(a){u.value=a.id,s.fullName=a.fullName,s.role=a.role,s.username=a.username,s.password="",s.hireDate=a.hireDate,s.status=a.status,d.value=""}function R(a){confirm("Delete this employee?")&&(c.removeEmployee(a),u.value===a&&w())}function E(a){return F.value.get(a.username)||{count:0,total:0}}return j(()=>{c.load(),S.load()}),(a,l)=>(n(),r("div",P,[A(C).isAdmin?(n(),r("div",$,[t("div",z,[t("h2",H,o(u.value==null?"Add Employee":"Edit Employee"),1),u.value?(n(),r("button",{key:0,class:"btn-ghost text-xs",onClick:w},"Cancel")):m("",!0)]),d.value?(n(),r("div",G,o(d.value),1)):m("",!0),t("div",J,[t("div",null,[l[9]||(l[9]=t("label",{class:"subtle-label"},"Full Name *",-1)),i(t("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>s.fullName=e),type:"text",class:"input-field"},null,512),[[f,s.fullName]])]),t("div",null,[l[10]||(l[10]=t("label",{class:"subtle-label"},"Username *",-1)),i(t("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>s.username=e),type:"text",class:"input-field"},null,512),[[f,s.username]])]),t("div",null,[l[11]||(l[11]=t("label",{class:"subtle-label"},"Password *",-1)),i(t("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>s.password=e),placeholder:u.value?"Leave blank to keep current":"",type:"password",class:"input-field"},null,8,K),[[f,s.password]])]),t("div",null,[l[12]||(l[12]=t("label",{class:"subtle-label"},"Role *",-1)),i(t("select",{"onUpdate:modelValue":l[3]||(l[3]=e=>s.role=e),class:"input-field"},[(n(),r(b,null,x(N,e=>t("option",{key:e,value:e},o(e),9,Q)),64))],512),[[y,s.role]])]),t("div",null,[l[13]||(l[13]=t("label",{class:"subtle-label"},"Hire Date",-1)),i(t("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>s.hireDate=e),type:"date",class:"input-field"},null,512),[[f,s.hireDate]])]),t("div",null,[l[14]||(l[14]=t("label",{class:"subtle-label"},"Status",-1)),i(t("select",{"onUpdate:modelValue":l[5]||(l[5]=e=>s.status=e),class:"input-field"},[(n(),r(b,null,x(D,e=>t("option",{key:e,value:e},o(e),9,W)),64))],512),[[y,s.status]])])]),t("div",X,[t("button",{onClick:L,class:"btn-primary text-white"},o(u.value==null?"Add Employee":"Save Changes"),1),t("button",{onClick:w,class:"btn-ghost"},"Clear")])])):m("",!0),t("div",Y,[t("div",Z,[t("h2",ee,"Employees ("+o(k.value.length)+")",1),t("div",te,[i(t("select",{"onUpdate:modelValue":l[6]||(l[6]=e=>h.value=e),class:"input-field w-28 text-xs"},[l[15]||(l[15]=t("option",{value:"All"},"All Roles",-1)),(n(),r(b,null,x(N,e=>t("option",{key:e,value:e},o(e),9,le)),64))],512),[[y,h.value]]),i(t("select",{"onUpdate:modelValue":l[7]||(l[7]=e=>g.value=e),class:"input-field w-28 text-xs"},[l[16]||(l[16]=t("option",{value:"All"},"All Status",-1)),(n(),r(b,null,x(D,e=>t("option",{key:e,value:e},o(e),9,se)),64))],512),[[y,g.value]]),i(t("input",{"onUpdate:modelValue":l[8]||(l[8]=e=>_.value=e),type:"search",placeholder:"Search...",class:"input-field w-32 ml-4 text-xs",style:{"margin-left":"auto"}},null,512),[[f,_.value]])])]),t("div",ae,[t("div",oe,[t("table",ne,[l[18]||(l[18]=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"Username"),t("th",null,"Role"),t("th",null,"Status"),t("th",{class:"text-right"},"Sales"),t("th",{class:"text-right"},"Revenue"),t("th",{class:"text-center"},"Actions")])],-1)),t("tbody",null,[k.value.length===0?(n(),r("tr",re,[...l[17]||(l[17]=[t("td",{colspan:"7",class:"text-center text-slate-400"},"No employees found",-1)])])):m("",!0),(n(!0),r(b,null,x(k.value,e=>(n(),r("tr",{key:e.id},[t("td",ue,o(e.fullName),1),t("td",null,o(e.username),1),t("td",null,[t("span",{class:V(["pill-badge",{"text-purple-600 border-purple-100":e.role==="Admin","text-blue-600 border-blue-100":e.role==="Manager","text-emerald-600 border-emerald-100":e.role==="Cashier"}])},o(e.role),3)]),t("td",null,[t("span",{class:V(["pill-badge",e.status==="Active"?"text-emerald-600 border-emerald-100":"text-slate-500 border-slate-200"])},o(e.status),3)]),t("td",ie,o(E(e).count),1),t("td",de," â‚¹"+o(E(e).total.toFixed(2)),1),t("td",pe,[t("div",me,[A(C).isAdmin?(n(),r("button",{key:0,onClick:p=>M(e),class:"btn-ghost text-xs px-3 py-1"}," Edit ",8,ce)):m("",!0),A(C).isAdmin?(n(),r("button",{key:1,onClick:p=>R(e.id),class:"btn-danger text-xs px-3 py-1"}," Delete ",8,ve)):m("",!0)])])]))),128))])])])])])]))}});export{xe as default};
