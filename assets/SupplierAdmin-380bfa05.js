import{d as F,P as O,j as q,s as E,r as v,c as L,o as a,a as i,b as e,w as c,D as M,F as I,e as A,C,v as f,t as m,f as k,i as T,L as B,y as R,E as z,B as j}from"./index-95881755.js";const Q={class:"space-y-4"},G={class:"grid grid-cols-3 gap-4"},H=["value"],J={key:0,class:"rounded-lg border border-transparent p-4"},K={class:"w-full text-sm"},W={class:"divide-y"},X={class:"px-2 py-1"},Y={class:"px-2 py-1 text-right"},Z={class:"px-2 py-1 text-right"},ee={class:"px-2 py-1 text-right"},te={class:"px-2 py-1 text-center"},se=["onClick"],le={class:"border-t"},oe={class:"px-2 py-1 text-right font-semibold"},ne={class:"flex justify-end gap-2"},re=F({__name:"PurchaseOrderForm",props:{supplierId:{}},emits:["close","saved"],setup(V,{emit:g}){const h=V,w=g,S=O(),t=q(),d=E([]),x=v(null),b=v(1),y=v(0),n=v(new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]),p=L(()=>d.reduce((P,o)=>P+o.total,0));function N(){if(!x.value||b.value<=0||y.value<=0)return;const P=t.products.find(o=>o.id===x.value);P&&(d.push({productId:P.id,productName:P.name,quantity:b.value,unitPrice:y.value,total:b.value*y.value}),x.value=null,b.value=1,y.value=0)}function _(P){d.splice(P,1)}function U(){if(d.length===0){alert("Please add at least one item");return}S.createPO({supplierId:h.supplierId,items:[...d],totalAmount:p.value,status:"Pending",dueDate:n.value}),d.splice(0,d.length),w("saved"),w("close")}return(P,o)=>(a(),i("div",Q,[e("div",G,[e("div",null,[o[6]||(o[6]=e("label",{class:"block text-sm text-slate-200"},"Product",-1)),c(e("select",{"onUpdate:modelValue":o[0]||(o[0]=u=>x.value=u),class:"mt-1 w-full rounded-md border border-[rgba(255,255,255,0.06)] px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},[o[5]||(o[5]=e("option",{value:null},"Select Product",-1)),(a(!0),i(I,null,A(C(t).products,u=>(a(),i("option",{key:u.id,value:u.id},m(u.name),9,H))),128))],512),[[M,x.value]])]),e("div",null,[o[7]||(o[7]=e("label",{class:"block text-sm text-slate-200"},"Quantity",-1)),c(e("input",{"onUpdate:modelValue":o[1]||(o[1]=u=>b.value=u),type:"number",min:"1",class:"mt-1 w-full rounded-md border border-[rgba(255,255,255,0.06)] px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,b.value,void 0,{number:!0}]])]),e("div",null,[o[8]||(o[8]=e("label",{class:"block text-sm text-slate-200"},"Unit Price",-1)),c(e("input",{"onUpdate:modelValue":o[2]||(o[2]=u=>y.value=u),type:"number",min:"0",step:"0.01",class:"mt-1 w-full rounded-md border border-[rgba(255,255,255,0.06)] px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,y.value,void 0,{number:!0}]])])]),e("button",{onClick:N,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700"}," Add Item "),d.length>0?(a(),i("div",J,[o[12]||(o[12]=e("h4",{class:"mb-2 font-medium"},"Items",-1)),e("table",K,[o[11]||(o[11]=e("thead",{class:"dark-panel"},[e("tr",null,[e("th",{class:"px-2 py-1 text-left text-xs"},"Product"),e("th",{class:"px-2 py-1 text-right text-xs"},"Qty"),e("th",{class:"px-2 py-1 text-right text-xs"},"Price"),e("th",{class:"px-2 py-1 text-right text-xs"},"Total"),e("th",{class:"px-2 py-1 text-center text-xs"},"Action")])],-1)),e("tbody",W,[(a(!0),i(I,null,A(d,(u,D)=>(a(),i("tr",{key:D},[e("td",X,m(u.productName),1),e("td",Y,m(u.quantity),1),e("td",Z,"₹"+m(u.unitPrice.toFixed(2)),1),e("td",ee,"₹"+m(u.total.toFixed(2)),1),e("td",te,[e("button",{onClick:r=>_(D),class:"text-red-600 hover:text-red-800"},"Remove",8,se)])]))),128))]),e("tfoot",null,[e("tr",le,[o[9]||(o[9]=e("td",{colspan:"3",class:"px-2 py-1 text-right font-semibold"},"Total:",-1)),e("td",oe,"₹"+m(p.value.toFixed(2)),1),o[10]||(o[10]=e("td",null,null,-1))])])])])):k("",!0),e("div",null,[o[13]||(o[13]=e("label",{class:"block text-sm text-slate-200"},"Due Date",-1)),c(e("input",{"onUpdate:modelValue":o[3]||(o[3]=u=>n.value=u),type:"date",class:"mt-1 w-full rounded-md border border-[rgba(255,255,255,0.06)] px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,n.value]])]),e("div",ne,[e("button",{onClick:o[4]||(o[4]=u=>w("close")),class:"rounded-md border border-[rgba(255,255,255,0.06)] px-4 py-2 text-sm"}," Cancel "),e("button",{onClick:U,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700"}," Create PO ")])]))}}),de={class:"space-y-4"},ae={class:"flex justify-end gap-2"},ie=F({__name:"SupplierPaymentForm",props:{supplierId:{}},emits:["close","saved"],setup(V,{emit:g}){const h=V,w=g,S=O(),t=v(0),d=v(new Date().toISOString().split("T")[0]),x=v("");function b(){if(t.value<=0){alert("Please enter a valid amount");return}S.recordPayment({supplierId:h.supplierId,amount:t.value,paymentDate:d.value,notes:x.value||void 0}),t.value=0,d.value=new Date().toISOString().split("T")[0],x.value="",w("saved"),w("close")}return(y,n)=>(a(),i("div",de,[e("div",null,[n[4]||(n[4]=e("label",{class:"block text-sm text-slate-200"},[T("Amount "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":n[0]||(n[0]=p=>t.value=p),type:"number",min:"0.01",step:"0.01",class:"mt-1 w-full rounded-md border border-[rgba(255,255,255,0.06)] px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,t.value,void 0,{number:!0}]])]),e("div",null,[n[5]||(n[5]=e("label",{class:"block text-sm text-slate-200"},"Payment Date",-1)),c(e("input",{"onUpdate:modelValue":n[1]||(n[1]=p=>d.value=p),type:"date",class:"mt-1 w-full rounded-md border border-[rgba(255,255,255,0.06)] px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,d.value]])]),e("div",null,[n[6]||(n[6]=e("label",{class:"block text-sm text-slate-200"},"Notes",-1)),c(e("textarea",{"onUpdate:modelValue":n[2]||(n[2]=p=>x.value=p),rows:"2",class:"mt-1 w-full rounded-md border border-[rgba(255,255,255,0.06)] px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,x.value]])]),e("div",ae,[e("button",{onClick:n[3]||(n[3]=p=>w("close")),class:"rounded-md border border-[rgba(255,255,255,0.06)] px-4 py-2 text-sm"}," Cancel "),e("button",{onClick:b,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700"}," Record Payment ")])]))}}),ue={class:"space-y-6"},pe={key:0,class:"rounded-lg border border-transparent p-4 dark-panel"},me={class:"mb-3 text-lg font-semibold text-slate-100"},ce={key:0,class:"mb-3 rounded-md bg-red-50 p-2 text-sm text-red-700"},xe={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},ve=["value"],be={class:"flex items-center gap-2"},fe={class:"mt-4 flex gap-2"},ge={class:"rounded-lg border border-transparent p-4 dark-panel"},ye={class:"mb-4 flex items-center justify-between"},ke={class:"text-lg font-semibold form-label"},Pe={class:"overflow-x-auto"},he={class:"w-full text-sm"},we={class:"divide-y divide-gray-200"},Ce={key:0,class:"text-center table-text"},Se={class:"px-4 py-2"},Ne={class:"font-medium table-text"},_e={key:0,class:"text-xs text-indigo-600"},$e={class:"px-4 py-2 table-text"},Te={class:"px-4 py-2 table-text"},Ve={class:"px-4 py-2 table-text"},De={class:"px-4 py-2 table-text"},Ie={class:"px-4 py-2"},Ae={class:"flex justify-center gap-1"},Ue=["onClick"],Fe=["onClick"],Oe=["onClick"],je=["onClick"],qe={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4"},Ee={class:"w-full max-w-2xl rounded-lg dark-panel p-6"},Le={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4"},Me={class:"w-full max-w-md rounded-lg dark-panel p-6"},Re=F({__name:"SupplierAdmin",setup(V){const g=O(),h=B(),w=q(),S=["Net 15","Net 30","Net 45","Cash on Delivery","Prepaid"],t=E({supplierName:"",contactPerson:"",phone:"",email:"",address:"",paymentTerms:"Net 30",preferred:!1}),d=v(null),x=v(""),b=v(!1),y=v(!1),n=v(null),p=v(""),N=L(()=>{let r=g.suppliersForCurrentStore;const s=x.value.trim().toLowerCase();return s&&(r=r.filter(l=>l.supplierName.toLowerCase().includes(s)||l.contactPerson.toLowerCase().includes(s)||l.phone.includes(s)||l.email.toLowerCase().includes(s))),r.sort((l,$)=>l.supplierName.localeCompare($.supplierName))});function _(){t.supplierName="",t.contactPerson="",t.phone="",t.email="",t.address="",t.paymentTerms="Net 30",t.preferred=!1,d.value=null,p.value=""}function U(){var r,s;if(!t.supplierName.trim()||!t.contactPerson.trim()||!t.phone.trim()||!t.email.trim()){p.value="Please fill in all required fields";return}try{d.value==null?g.addSupplier({supplierName:t.supplierName.trim(),contactPerson:t.contactPerson.trim(),phone:t.phone.trim(),email:t.email.trim(),address:((r=t.address)==null?void 0:r.trim())||void 0,paymentTerms:t.paymentTerms,preferred:t.preferred}):g.updateSupplier(d.value,{supplierName:t.supplierName.trim(),contactPerson:t.contactPerson.trim(),phone:t.phone.trim(),email:t.email.trim(),address:((s=t.address)==null?void 0:s.trim())||void 0,paymentTerms:t.paymentTerms,preferred:t.preferred}),_(),p.value=""}catch(l){p.value=l.message||"Failed to save supplier"}}function P(r){d.value=r.id,t.supplierName=r.supplierName,t.contactPerson=r.contactPerson,t.phone=r.phone,t.email=r.email,t.address=r.address||"",t.paymentTerms=r.paymentTerms,t.preferred=r.preferred,p.value=""}function o(r){confirm("Delete this supplier?")&&(g.removeSupplier(r),d.value===r&&_())}function u(r){n.value=r,b.value=!0}function D(r){n.value=r,y.value=!0}return R(()=>{g.load(),w.load()}),(r,s)=>(a(),i("div",ue,[C(h).isAdmin?(a(),i("div",pe,[e("h2",me,m(d.value==null?"Add Supplier":"Edit Supplier"),1),p.value?(a(),i("div",ce,m(p.value),1)):k("",!0),e("div",xe,[e("div",null,[s[12]||(s[12]=e("label",{class:"block text-sm form-label"},[T("Supplier Name "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>t.supplierName=l),type:"text",class:"mt-1 w-full rounded-md input-field"},null,512),[[f,t.supplierName]])]),e("div",null,[s[13]||(s[13]=e("label",{class:"block text-sm form-label"},[T("Contact Person "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>t.contactPerson=l),type:"text",class:"mt-1 w-full rounded-md input-field"},null,512),[[f,t.contactPerson]])]),e("div",null,[s[14]||(s[14]=e("label",{class:"block text-sm form-label"},[T("Phone "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>t.phone=l),type:"tel",class:"mt-1 w-full rounded-md input-field"},null,512),[[f,t.phone]])]),e("div",null,[s[15]||(s[15]=e("label",{class:"block text-sm form-label"},[T("Email "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>t.email=l),type:"email",class:"mt-1 w-full rounded-md input-field"},null,512),[[f,t.email]])]),e("div",null,[s[16]||(s[16]=e("label",{class:"block text-sm form-label"},"Address",-1)),c(e("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>t.address=l),type:"text",class:"mt-1 w-full rounded-md input-field"},null,512),[[f,t.address]])]),e("div",null,[s[17]||(s[17]=e("label",{class:"block text-sm form-label"},"Payment Terms",-1)),c(e("select",{"onUpdate:modelValue":s[5]||(s[5]=l=>t.paymentTerms=l),class:"mt-1 w-full rounded-md input-field"},[(a(),i(I,null,A(S,l=>e("option",{key:l,value:l},m(l),9,ve)),64))],512),[[M,t.paymentTerms]])]),e("div",be,[c(e("input",{"onUpdate:modelValue":s[6]||(s[6]=l=>t.preferred=l),type:"checkbox",id:"preferred",class:"h-4 w-4 rounded form-checkbox text-indigo-600 focus:ring-indigo-500"},null,512),[[z,t.preferred]]),s[18]||(s[18]=e("label",{for:"preferred",class:"text-sm form-label"},"Preferred Supplier",-1))])]),e("div",fe,[e("button",{onClick:U,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700"},m(d.value==null?"Add Supplier":"Save Changes"),1),e("button",{onClick:_,class:"rounded-md border border-[rgba(255,255,255,0.06)] px-4 py-2 text-sm"},"Clear")])])):k("",!0),e("div",ge,[e("div",ye,[e("h2",ke,"Suppliers ("+m(N.value.length)+")",1),c(e("input",{"onUpdate:modelValue":s[7]||(s[7]=l=>x.value=l),type:"text",placeholder:"Search suppliers...",class:"w-64 rounded-md input-field"},null,512),[[f,x.value]])]),e("div",Pe,[e("table",he,[s[20]||(s[20]=e("thead",{class:"dark-panel"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-slate-200"},"Name"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-slate-200"},"Contact"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-slate-200"},"Phone"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-slate-200"},"Email"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-slate-200"},"Payment Terms"),e("th",{class:"px-4 py-2 text-center text-xs font-medium text-slate-200"},"Actions")])],-1)),e("tbody",we,[N.value.length===0?(a(),i("tr",Ce,[...s[19]||(s[19]=[e("td",{colspan:"6",class:"px-4 py-8"},"No suppliers found",-1)])])):k("",!0),(a(!0),i(I,null,A(N.value,l=>(a(),i("tr",{key:l.id,class:"hover:dark-panel"},[e("td",Se,[e("div",Ne,m(l.supplierName),1),l.preferred?(a(),i("div",_e,"⭐ Preferred")):k("",!0)]),e("td",$e,m(l.contactPerson),1),e("td",Te,m(l.phone),1),e("td",Ve,m(l.email),1),e("td",De,m(l.paymentTerms),1),e("td",Ie,[e("div",Ae,[C(h).isAdmin?(a(),i("button",{key:0,onClick:$=>P(l),class:"rounded-md border border-[rgba(255,255,255,0.06)] px-2 py-1 text-xs hover:dark-panel"}," Edit ",8,Ue)):k("",!0),C(h).isAdmin?(a(),i("button",{key:1,onClick:$=>u(l.id),class:"rounded-md border border-blue-300 bg-blue-50 px-2 py-1 text-xs text-blue-700 hover:bg-blue-100"}," PO ",8,Fe)):k("",!0),C(h).isAdmin?(a(),i("button",{key:2,onClick:$=>D(l.id),class:"rounded-md border border-green-300 bg-green-50 px-2 py-1 text-xs text-green-700 hover:bg-green-100"}," Pay ",8,Oe)):k("",!0),C(h).isAdmin?(a(),i("button",{key:3,onClick:$=>o(l.id),class:"rounded-md border border-red-300 bg-red-50 px-2 py-1 text-xs text-red-700 hover:bg-red-100"}," Del ",8,je)):k("",!0)])])]))),128))])])])]),b.value?(a(),i("div",qe,[e("div",Ee,[s[21]||(s[21]=e("h3",{class:"mb-4 text-lg font-semibold"},"Create Purchase Order",-1)),j(re,{"supplier-id":n.value,onClose:s[8]||(s[8]=l=>{b.value=!1,n.value=null}),onSaved:s[9]||(s[9]=l=>C(g).load())},null,8,["supplier-id"])])])):k("",!0),y.value?(a(),i("div",Le,[e("div",Me,[s[22]||(s[22]=e("h3",{class:"mb-4 text-lg font-semibold"},"Record Payment",-1)),j(ie,{"supplier-id":n.value,onClose:s[10]||(s[10]=l=>{y.value=!1,n.value=null}),onSaved:s[11]||(s[11]=l=>C(g).load())},null,8,["supplier-id"])])])):k("",!0)]))}});export{Re as default};
